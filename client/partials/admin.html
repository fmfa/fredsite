<div class="container"
<div ng-controller='adminController'>

<div>
	<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
	  CREATE NEW CLASS
	</button>
<!-- {{getClasses}} -->
	<button class="btn btn-primary btn-lg" ng-Click="manageClasses()">Manage Open Classes</button>

	<button class="btn btn-primary btn-lg" ng-Click="seeManageUsers()">Manage Users</button>

	<button class="btn btn-primary btn-lg" ng-Click="showFlaggedPosts()">See Flagged Posts</button>

	<button class="btn btn-primary btn-lg">Manage Closed</button>


	<!-- Modal -->
	<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	  <div class="modal-dialog" role="document">
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
	          <span aria-hidden="true">&times;</span>
	        </button>
	        <h4 class="modal-title" id="myModalLabel">Create a New Class</h4>
	      </div>
	      <div class="modal-body">
	        <form>
	        	Class Name:<input type="text" ng-model='class.name'></input><br>
	        	<!-- Class Members:<input type="text" ng-model='class.emails'></input>
	        	<h6>Enter emails comma separated</h6> -->
	        	Class Description: <textarea ng-model="class.description" cols="50" rows="5"></textarea><br>
	        	
	        </form>
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
	        <button type="button" class="btn btn-primary" ng-click='createClass()'>Add Class</button>
	      </div>
	    </div>
	  </div>
	</div>
</div>

<div ng-if="showClasses">
<div  ng-repeat="c in getClasses">
	<!-- {{c}} -->
	<h4>Class:{{c.name}} CreatedAt: {{c.createdAt}}</h4>
	<h5>{{c.description}}</h5>
	<h4>Users: {{c.users}}</h4>
	<ul>
		<li ng-repeat="u in c._users">{{u.first_name}} {{u.last_name}}</li>
	</ul>
	<button>Close Class</button>
	<button ng-click="addUserToClass(c._id, c.name)">Add User to Class</button>
</div>
</div>

<div ng-if="showAddUserToClass">
	<h4>Add user to class: {{classNameToAddUser}}</h4>
	<p>Search</p>
	<p>First Name: <input type="text" ng-model="findUser.firstName"></p>
	<p>Last Name: <input type="text" ng-model="findUser.lastName"></p>
	<p><input type="submit" value="Search for User" ng-click="searchForUser(findUser)"></p>

	<div ng-if="foundUsers">
		<div ng-repeat="f in foundUsers">
		foundUser: {{f._id}} 
		class_id: {{classIdToAddUser}}
			<p>{{f.first_name}} {{f.last_name}}</p>
			<p>{{f.email}} {{f.createdAt}}</p>
			<button ng-click="addThisUserToClass(f._id, classIdToAddUser)">Add To Class</button>
		</div>
	</div>
</div>

<div ng-if="seeFlaggedPosts">
	<h3>FLAGGED POST</h3>
	<div ng-if='flaggedPosts' ng-repeat='x in flaggedPosts| orderBy: createdAt : true' style="padding-left: 0;">
		<div class="container">
		<div class="col-sm-12" style="padding: 0;">

				<h4>
					{{x.title}}
					<img src={{x._user_id.profile_pic}} height = '100px' width = '100px'>

				</h4>
					<img class="img-responsive" ng-if="x.url" src="{{x.url}}"  alt="img">
					<div ng-if="x.urlVideo" class="embed-responsive embed-responsive-16by9">
						<iframe class="embed-responsive-item" ng-src="{{x.urlVideo | trusted}}" frameborder="0" allowfullscreen></iframe>
					</div>
				<p>{{x.text}} - {{x.createdAt | date: 'MMMM, dd, yyyy @ h:mm a'}} Written By: {{ x._user_id.first_name }} {{x._user_id.last_name}}</p>

				<button  class="btn deleteBtn btn-danger" ng-click = 'deletePost(x._id)'><span class="glyphicon glyphicon-trash" aria-hidden="true"></span> Delete</button>
				<button ng-if ="x.flagged !== true" type="button" class="btn btn-danger" aria-label="Left Align" ng-click='flagPost(x._id)'>
					<span class="glyphicon glyphicon-thumbs-down" aria-hidden="true" ></span> Flag Post
				</button>
				<p ng-if ="x.flagged == true" class="label label-danger">This post has been flagged and is under review by the moderator</p>
				<button  class="btn btn-info" aria-label="Left Align" ng-click='unflagPost(x._id)'>
					<span class="glyphicon glyphicon-thumbs-up" aria-hidden="true" ></span> UnFlag Post
				</button>
				<div ng-repeat='c in x.comments' style="margin-left: 60px;">
			</div>

				<div id="commentsFeed" class="col-sm-12" ng-repeat='c in x.comments' >
	<!--                     {{c}} -->
						<h5>{{c._user_name}} commented:</h5>
					<p>{{c.text}} <button ng-if='user_id == c.rootScope.user._user_id._id' class="btn deleteBtn btn-danger" ng-click = 'deleteComment(c._id)'>Delete</button></p>
					<br><hr>
					</div>
			</div>
		<div id="comment" class="col-sm-12">
			 <form class="form-horizontal">
					<div class="form-group">
					<textarea class="form-control" rows="3" ng-model='comment[x._id].text'></textarea>
					</div>
					<div class="form-group">
					<button class="btn commentBtn pull-right" type="submit" value="Comment" ng-click='commentPost(x._id)'>Comment</button>
					</div>
			</form>

			</div>
		</div>
	</div>

</div><!--end seeFlaggedPosts -->

<div ng-if="manageUsers">
	<div class="container">
	<div ng-repeat='u in users'>
	<!-- {{u}} -->
		<h5>{{u.first_name}} {{u.last_name}}</h5>
		<div>
			<h6>{{u.email}}</h6>
			<h6>Class: {{u._class.name}}</h6>
			<h6 ng-if='u.phone'>{{u.phone}}</h6>
			<h6>Blocked: {{u.blocked}}</h6>
		</div>
		<div ng-if="!u.blocked">
			<button class="btn deleteBtn btn-danger pull-right" ng-click="blockUser(u._id)">Block User</button>
		</div>
		<div ng-if="u.blocked">
			<button class="btn deleteBtn btn-danger pull-right" ng-click="blockUser(u._id)">Unblock User</button>
		</div>
		<button class="btn deleteBtn btn-danger pull-right" ng-click = 'deleteUser(u._id)'>Delete User</button><br><hr>
	</div>
</div>
</div>
</div> <!-- end manage users -->


<!-- <div ng-if="manageUsers"> -->
	<!-- <div class="container"> -->
	
</div>

<!-- </div> -->
<!-- </div> < -->
</div>

